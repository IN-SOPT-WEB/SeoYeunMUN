## Fetching Library ë€ ë¬´ì—‡ì¸ê°€?

---

## ğŸ’¡Storeë€? Storeë€ ì „ì—­ ìƒíƒœê°€ ì €ì¥ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê³µê°„ì´ë‹¤.

FE ê°œë°œí•  ë•Œ ë³´í†µ Redux, Mobxì™€ ê°™ì€ `ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬`ë¥¼ ì´ìš©í•´ ë‹¤ë£¨ëŠ” ì—¬ëŸ¬ ìƒíƒœì™€ ì´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì½”ë“œë“¤ì´ë¼ê³  ë§í•  ìˆ˜ ìˆë‹¤.

### Stateì˜ ì¢…ë¥˜

- **Local State**: ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” state
- **Global State**: Global Storeì— ì •ì˜ë˜ì–´ í”„ë¡œì íŠ¸ ì–´ë””ì—ì„œë‚˜ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” state
- **Server State**: ì„œë²„ë¡œë¶€í„° ë°›ì•„ì˜¤ëŠ” state

StateëŠ” ì´ë ‡ê²Œ ì„¸ ê°œë¡œ ë‚˜ëˆ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ Storeì— ìœ„ì˜ `Global State` ë¿ë§Œ ì•„ë‹ˆë¼ ë¹„ë™ê¸° APIë¡œ ë°›ì•„ì˜¤ëŠ” `Server State`ì˜ ì •ë³´ ë° ê´€ë¦¬ê¹Œì§€ ë§¡ê¸°ê²Œ ë˜ì—ˆë‹¤. ê·¸ ê²°ê³¼, ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¹„ëŒ€í•´ì§€ê³  ì´ì— ë”°ë¼ êµ¬ë¶„ì´ í˜ë“¤ì–´ì¡Œë‹¤. ë˜í•œ, ì—…ë°ì´íŠ¸ ë˜ëŠ” ì„œë²„ ìƒíƒœë¥¼ ë°›ì•„ì˜¤ì§€ ì•Šê¸° ë•Œë¬¸ì— ì§ì ‘ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì•¼ë˜ëŠ” ë¶ˆí¸í•¨ì´ ì¡´ì¬í–ˆë‹¤.

ë”°ë¼ì„œ Global Stateì™€ Server Stateë¥¼ ë¶„ë¦¬í•˜ê³  ë™ì¼í•œ API í˜¸ì¶œì„ ì—¬ëŸ¬ ë²ˆ ìš”êµ¬í•˜ì§€ ì•Šìœ¼ë©´ì„œ ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Server Stateë§Œì„ ìœ„í•œ ê³µê°„ì¸ **Fetching Library** ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤.

> _ìœ„ì˜ ì½”ë“œë¥¼ ë³´ê³  StoreëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì½”ë“œë¼ê³  ë– ì˜¤ë¥¼ê¹Œìš”, ì•„ë‹ˆë©´ `API í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ì½”ë“œ`ë¼ê³  ë– ì˜¤ë¥¼ê¹Œìš”? ë˜í•œ, `API ì‘ë‹µì—ì„œ ë°›ì€ ë°ì´í„°ì˜ ì¡°ì‘ê³¼ ê°€ê³µê¹Œì§€` Storeì—ì„œ ë‹´ë‹¹í•˜ê³  ìˆê±°ë‚˜ í˜¹ì€ ê´€ë ¨ ì½”ë“œë¥¼ í˜¸ì¶œí•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤._
>
> _Reduxì—ì„œëŠ” redux-saga, redux-thunkë“±ì˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´, Mobxì—ì„œëŠ” Flowë¥¼ í†µí•´ ë¹„ë™ê¸° í†µì‹ ì˜ í•´ë²•ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³´í†µ í”„ë¡œë•íŠ¸ëŠ” ë³µì¡í•˜ë‹ˆ ëª‡ ê°œ, ëª‡ì‹­ ê°œ í˜¹ì€ ëª‡ë°± ê°œì˜ API ë™ì‘ë§ˆë‹¤ ëª¨ë‘ AJAX ìƒíƒœì™€ ì‘ë‹µê°’ì„ ë°”ë¼ë³´ëŠ” ìƒíƒœë“¤ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²ƒë“¤ì„ ëª¨ë‘ ì „ì—­ ìƒíƒœì— ë„£ëŠ”ë‹¤ë‹ˆ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì´ê³  ë¶ˆí•„ìš”í•´ ë³´ì´ì§€ ì•Šë‚˜ìš”?_

> _ë¦¬ì•¡íŠ¸ ê°œë°œìë¼ë©´ ëˆ„êµ¬ë‚˜ Redux, MobX ë“±ì˜ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë³¸ ê²½í—˜ì´ ìˆì„ ê²ƒì´ë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ì—ëŠ” ìœ ìš©í•˜ì§€ë§Œ, ì„œë²„ ìƒíƒœì™€ ë™ê¸°í™”ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë“¤ì€ ì§ì ‘ `ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ ì¤˜ì•¼` í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆë‹¤._

<br>

## â˜ï¸Â React-query

---

<aside>
ğŸ’¡ React QueryëŠ” ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì„œë²„ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê³ , ìºì‹±í•˜ê³ , ë™ê¸°í™”í•˜ê³ , ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì„ ì‰½ê²Œ í•´ ì¤€ë‹¤.

</aside>

### íŠ¹ì§• ë° ì¥ì 

- ë‹¤ì–‘í•œ ê¸°ëŠ¥

  - ë°ì´í„°ê°€ ì˜¤ë˜ ë˜ì—ˆë‹¤ê³  íŒë‹¨ë˜ë©´ ë‹¤ì‹œ get (invalidateQueries) : Stale timeì´ ì§€ë‚˜ë©´
  - React QueryëŠ” ì¿¼ë¦¬ê°€ ì§€ì •ëœ ì‹œê°„(ì„¤ì •í•˜ì§€ ì•Šì„ ê²½ìš° ê¸°ë³¸ 5ë¶„) ë™ì•ˆ ì¿¼ë¦¬ê°€ ì‚¬ìš©ë˜ì§€ ì•Šì„ ê²½ìš° ìë™ìœ¼ë¡œ Garbage Collectionì„ ì§€ì› : Cache timeì´ ì§€ë‚˜ë©´
  - ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œ ë®¤í…Œì´ì…˜ì„ ì‹œë„í–ˆì„ ë•Œ í•´ë‹¹ ìš”ì²­ì„ ì ì‹œ ë©ˆì·„ë‹¤ê°€ ì˜¨ë¼ì¸ ìƒíƒœê°€ ë˜ë©´ ìš”ì²­ ì¬ì‹œë„
  - Dev toolì„ ì§€ì›
  - getì„ í•œ ë°ì´í„°ì— ëŒ€í•´ updateë¥¼ í•˜ë©´ ìë™ìœ¼ë¡œ getì„ ë‹¤ì‹œ ìˆ˜í–‰í•œë‹¤. (ì˜ˆë¥¼ ë“¤ë©´ ê²Œì‹œíŒì˜ ê¸€ì„ ê°€ì ¸ì™”ì„ ë•Œ ê²Œì‹œíŒì˜ ê¸€ì„ ìƒì„±í•˜ë©´ ê²Œì‹œíŒ ê¸€ì„ getí•˜ëŠ” apië¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰ )
  - ë™ì¼ ë°ì´í„° ì—¬ëŸ¬ë²ˆ ìš”ì²­í•˜ë©´ í•œë²ˆë§Œ ìš”ì²­. (ì˜µì…˜ì— ë”°ë¼ ì¤‘ë³µ í˜¸ì¶œ í—ˆìš© ì‹œê°„ ì¡°ì ˆ ê°€ëŠ¥
  - `isFetching` ì²« ë²ˆì§¸ ë¡œë“œë¥¼ ì œì™¸í•œ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ìœ¼ë¡œ ëª¨ë“  ë°ì´í„° ë¡œë“œ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ”Â `isValidating` ê³¼ êµ¬ë³„.

- ì¿¼ë¦¬ê°€ ì—…ë°ì´íŠ¸ë  ë•Œë§Œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤. ë˜í•œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì„ ë•ŒëŠ” í•œêº¼ë²ˆì— ë¬¶ì–´ ì—…ë°ì´íŠ¸.
- [Structural Sharing](https://tkdodo.eu/blog/react-query-render-optimizations)ìœ¼ë¡œ ë³€í™”ê°ì§€
- ì½”ë“œ

  ```jsx
  //ì½”ë“œ ì˜ˆì‹œ
  import { QueryClient, QueryClientProvider, useQuery } from "react-query";

  const queryClient = new QueryClient();
  const url = "https://61b88c9d64e4a10017d19053.mockapi.io/user";

  const App = () => (
    <div>
      <QueryClientProvider client={queryClient}>
        <ReactQueryProfile />
      </QueryClientProvider>
    </div>
  );

  const ReactQueryProfile = () => {
    const { isLoading, error, data, isFetching } = useQuery("users", () =>
      fetch("https://61b88c9d64e4a10017d19053.mockapi.io/user").then((res) =>
        res.json()
      )
    );

    if (error) return <div>failed to load</div>;
    if (isLoading) return <div>loading...</div>;

    return <Profile library="React Query" data={data} />;
  };

  const Profile = ({ library, data }) => (
    <div>
      <h1>Users from {library}</h1>
      {data.map((user) => (
        <p>
          {user.level} developer <strong>{user.name}</strong>
        </p>
      ))}
    </div>
  );

  export default App;
  ```

<br>

## âœŒï¸SWR

---

<aside>
ğŸ’¡ SWRì€ ë¨¼ì € ìºì‹œì—ì„œ ë°ì´í„°ë¥¼ ë°˜í™˜í•œ ë‹¤ìŒ, ì„œë²„ì— ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìš”ì²­ì„ ë³´ë‚´ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ ìµœì‹  ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ì „ëµì´ë‹¤.

</aside>

### íŠ¹ì§• ë° ì¥ì 

- ì‘ì€ ë²ˆë“¤ ì‚¬ì´ì¦ˆ

> SWRì˜ ë²ˆë“¤ ì‚¬ì´ì¦ˆëŠ” 15kbì§€ë§Œ React Queryì˜ ë²ˆë“¤ ì‚¬ì´ì¦ˆëŠ” 50kbë¼ê³  í•©ë‹ˆë‹¤. SWR ì‚¬ì´ì¦ˆì˜ 3ë°°ê°€ ë„˜ë„¤ìš”!
>
> ê·¸ë˜ì„œ ì—¬ëŸ¬ë¶„ì´ ì‚¬ì´ì¦ˆë¥¼ ê³ ë ¤í•œë‹¤ë©´ SWRì´ ì—¬ê¸°ì„œ í° ì°¨ì´ë¡œ ì´ê¹ë‹ˆë‹¤!

- [**ìì„¸í•œ ê³µì‹ ë¬¸ì„œ**](https://swr.vercel.app/ko)
- [dequal](https://www.npmjs.com/package/dequal)ë¡œ ë³€í™”ê°ì§€
- ì½”ë“œë³´ê¸°

  ```jsx
  //ì½”ë“œ ì˜ˆì‹œ
  import useSWR from "swr";

  const App = () => (
    <div>
      <SWRProfile />
    </div>
  );

  const SWRProfile = () => {
    const { data, error } = useSWR(
      "https://61b88c9d64e4a10017d19053.mockapi.io/user",
      (url) => fetch(url).then((res) => res.json())
    );

    if (error) return <div>failed to load</div>;
    if (!data) return <div>loading...</div>;

    return <Profile library="SWR" data={data} />;
  };

  const Profile = ({ library, data }) => (
    <div>
      <h1>Users from {library}</h1>
      {data.map((user) => (
        <p>
          {user.level} developer <strong>{user.name}</strong>
        </p>
      ))}
    </div>
  );

  export default App;
  ```

<br>

## ë˜â€¦ ì°¨ì´ì 

---

1. ìºì‹œë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹

`useSWR`ë°›ì€ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì €ì¥í•˜ë¯€ë¡œ í•„ìš”í•  ë•Œ ë„¤íŠ¸ì›Œí¬ì— ë‹¤ì‹œ ìš”ì²­í•  í•„ìš”ê°€ ì—†ê³ Â ìºì‹œì—ì„œ ê°€ì ¸ì˜¨ë‹¤.Â ì´ê²ƒì€ ì†ë„ ë©´ì—ì„œëŠ” ì¢‹ì§€ë§Œ, ë°±ì—”ë“œ ì„œë¹„ìŠ¤ê°€ ìì£¼ ì—…ë°ì´íŠ¸ë˜ë©´ ë°ì´í„°ê°€ ì˜¤ë˜ë  ìˆ˜ ìˆë‹¤.Â React QueryëŠ” ìºì‹±ì— ëŒ€í•œ ë” ë§ì€ ì œì–´ë¥¼ ì œê³µí•˜ë¯€ë¡œ ìœ ìš©í•˜ì§€ ì•Šì„ ë•Œ ìºì‹œë¥¼ ì§€ìš¸ ìˆ˜ ìˆë‹¤.

1. í˜ì´ì§•ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹

`useSWR`ê°€ì ¸ì˜¨ ë°ì´í„°ì— ìë™ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë§¤ê¸°ë¯€ë¡œ ì‚¬ìš©ìê°€ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•  ë•Œ ë” ë§ì€ ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê³„ì† ê°€ì ¸ì˜¬ í•„ìš”ê°€ ì—†ë‹¤.Â React QueryëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ëŠ” ì•Šì§€ë§Œ customizing ê°€ëŠ¥.
<br>
<br>

## ğŸ¤”Â ì–´ë–¤ ê±¸ ì¨ì•¼í• ê¹Œ?

---

í° í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰ ì‹œì—, ë§ì€ ê°–ì¶°ì§„ ê¸°ëŠ¥ì„ í•„ìš”ë¡œí•˜ê³  ë°ì´í„°ì˜ ì—…ë°ì´íŠ¸ê°€ ë¹ˆë²ˆíˆ ì¼ì–´ë‚œë‹¤ë©´ react- queryë¥¼

ì´ìš©í•˜ëŠ” ê²Œ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

ê·¸ë ‡ì§€ ì•Šê³  ì†Œê·œëª¨ì˜ í”„ë¡œì íŠ¸ì— ë‹¨ìˆœí•˜ê³  ê°€ë²¼ìš´ ì„œë²„ ìƒíƒœê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤ë©´, SWRë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë‚˜ì„ ê²ƒ ê°™ë‹¤.

> ê·¸ë˜ì„œ ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ ê°„ë‹¨í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ê³  ì¦‰ì‹œ ì‚¬ìš©ì´ ê°€ëŠ¥í•œ ê°„ë‹¨í•œ ì†”ë£¨ì…˜ì„ ì›í•œë‹¤ë©´ SWRì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
>
> í•˜ì§€ë§Œ ë”ìš± ë§ì€ ì»¨íŠ¸ë¡¤ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš”í•˜ê³  ê°œë°œì ë„êµ¬ë¥¼ ìµœëŒ€í•œìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ react-queryë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ì£ .

> There is no clear winner betweenÂ **[useSWR](https://codedamn.com/learn/useswr)** vsÂ **[React Query](https://codedamn.com/learn/react-query)**.
>
> Both have benefits and drawbacks, so you must decide based on your specific needs and preferences. If you need a simple solution for fetching data, thenÂ **`useSWR`** might be the better option. React Query is the way to go if you need more functionality and customization options.
> <br>

- ì¶œì²˜
  - **Data Fetching Library ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í• ê¹Œ?**
    [https://kooku0.github.io/blog/data-fetching-library-ì–´ë–»ê²Œ-ì‚¬ìš©í•´ì•¼í• ê¹Œ/](https://kooku0.github.io/blog/data-fetching-library-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C/)
  - \***\*Storeì—ì„œ ë¹„ë™ê¸° í†µì‹  ë¶„ë¦¬í•˜ê¸° (feat. React Query)\*\***
    [https://techblog.woowahan.com/6339/](https://techblog.woowahan.com/6339/)
  - **REACT QUERY VS SWR**
    [https://tech.madup.com/react-query-vs-swr/](https://tech.madup.com/react-query-vs-swr/)
  - \***\*React Query vs SWR\*\***
    [https://goongoguma.github.io/2021/11/04/React-Query-vs-SWR/](https://goongoguma.github.io/2021/11/04/React-Query-vs-SWR/)
  - \***\*Reactì—ì„œ ì„œë²„ ë°ì´í„°ë¥¼ ìµœì‹ ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°(React Query, SWR)\*\***
    [https://fe-developers.kakaoent.com/2022/220224-data-fetching-libs/](https://fe-developers.kakaoent.com/2022/220224-data-fetching-libs/)
  - \***\*useSWR vs. React Query â€“ Differences and which one should you choose?\*\***
    [https://codedamn.com/news/javascript/useswr-vs-react-query-differences-and-which-one-should-you-choose](https://codedamn.com/news/javascript/useswr-vs-react-query-differences-and-which-one-should-you-choose)
  - \***\*React Queryì—ì„œ staleTimeê³¼ cacheTimeì˜ ì°¨ì´\*\***
    [https://velog.io/@yrnana/React-Queryì—ì„œ-staleTimeê³¼-cacheTimeì˜-ì°¨ì´](https://velog.io/@yrnana/React-Query%EC%97%90%EC%84%9C-staleTime%EA%B3%BC-cacheTime%EC%9D%98-%EC%B0%A8%EC%9D%B4)
